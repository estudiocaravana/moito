---
import Layout from "../layouts/Layout.astro";
import Migas from "../components/libro/Migas.astro";
import AvatarGroup from "../components/libro/AvatarGroup.astro";
import data from "../data/club.json";
import libros from "../data/libros.json";
import Paginador from "../components/paginador.astro";
import Valoracions from "../components/club/Valoracions.astro";
import Lidos from "../components/club/Lidos.astro";
---

<Layout>
  <Migas />
  <div class="caixa flex flex-col lg:flex-row gap-12 xl:gap-24 mt-6">
    <!-- COLUMNA IZQ -->
    <div class="flex-1 sm:w-[420px] sm:mx-auto lg:max-w-[300px]">
      <div class="aspect-square flex items-end">
        <div class="shadow-md transition-all duration-500 hover:scale-90 bg-cyan-500 size-full rounded-2xl"></div>
      </div>
    </div>
    <!-- COLUMNA DRCH -->
    <div class="flex-1">
      <h1 class="text-4xl lg:text-5xl">Club de lectura infantil Miúdo</h1>
      <div class="flex items-center gap-2 mt-3 text-slate-400">
        <div>
          <svg class="fill-none stroke-current size-5 stroke-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            ><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"></path><circle cx="12" cy="10" r="3"></circle></svg
          >
        </div>
        <div class="">Biblioteca Municipal Durán Loriga, A Coruña</div>
      </div>
      <!-- Membros -->
      <div class="mt-6 flex items-center gap-4">
        <AvatarGroup />
        <div class="mt-2">15 membros en M8porler</div>
      </div>
      <!-- Inscribirse. Este div es sólo para poner las opciones una al lado de otra  -->
      <div class="flex items-end gap-12 mt-9">
        <!-- Si es por invitación -->
        <div>
          <div class="flex items-center gap-2 mt-3 text-slate-400">
            <div>
              <svg class="size-5 stroke-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"></path><rect x="2" y="4" width="20" height="16" rx="2"></rect></svg>
            </div>
            <div class="uppercase">Acceso por invitación</div>
          </div>
          <button type="button" class="boton azul mt-3">
            <svg class="size-6 stroke-current" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>
            Solicitar Invitación
          </button>
        </div>
        <!-- Si es abierto -->
        <div>
          <button type="button" class="boton azul mt-3">
            <svg class="size-6 stroke-current" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>
            Unirme
          </button>
        </div>
      </div>
      <!-- Descripción -->
      <div class="mt-12">
        O club de lectura infantil Miúdo está dirixido a nenos e nenas de entre 8 e 12 anos que queiran descubrir o pracer da lectura a través de libros adaptados ás súas idades. Cada mes, seleccionamos un libro diferente que exploramos xuntos nas nosas sesións de lectura e discusión. As sesións do
        club inclúen actividades interactivas, xogos literarios e debates sobre os temas e personaxes dos libros. Ademais, fomentamos a creatividade dos participantes a través de talleres de escritura e ilustración relacionados coas lecturas.
      </div>
      <!-- ficha -->
      <div class="mt-12 bg-slate-100 rounded-4xl p-12 shadow">
        <div class="grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 text-base gap-x-3 gap-y-6">
          {
            data.ficha.map((item) => (
              <div>
                <div class="uppercase text-slate-500 text-sm">{item.titulo}</div>
                {item.descripcion}
              </div>
            ))
          }
        </div>
      </div>
      <!-- Aviso de maquetación. quitar en produción -->
      <div class="mt-12 p-6 bg-yellow-100 border-l-4 border-yellow-400 text-yellow-800">
        <div class="font-semibold mb-2">Aviso de maquetación:</div>
        A partir de aquí solo será visible se o club é público ou formas parte do club
      </div>
      <!-- membros do clube -->
      <div class="mt-12">
        <h2 class="text-2xl lg:text-3xl">Membros do club</h2>
      </div>
      <div class="mt-9 grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 text-base gap-x-3 gap-y-6">
        {
          data.membros
            .sort((a, b) => (b.tipo === "ADMIN" ? 1 : 0) - (a.tipo === "ADMIN" ? 1 : 0))
            .map((item) => (
              <div class="flex gap-3">
                <div class="relative">
                  <img src={item.imaxe} alt={item.nome} class={`border-2 rounded-full w-16 h-16 ${item.tipo === "ADMIN" ? "border-teal-500" : "text-slate-300"}`} />
                  {item.tipo === "ADMIN" && (
                    <div class="absolute top-0 left-0">
                      <svg class="size-5 fill-teal-500 stroke-teal-50" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                      </svg>
                    </div>
                  )}
                </div>
                <div>
                  {item.nome}
                  <div class={`uppercase text-sm ${item.tipo === "ADMIN" ? "text-teal-500" : "text-slate-500"}`}>{item.tipo}</div>
                </div>
              </div>
            ))
        }
      </div>
      <!-- Lectura actual -->
      <div class="my-12 sm:my-44 sm:max-h-[230px] bg-cyan-100 rounded-2xl p-8 flex flex-col sm:flex-row gap-6 sm:items-center">
        <div class="flex-shrink-0">
          <img src="/libro/portada.jpg" alt="Tras do ceo" class="h-72 object-cover rounded-lg shadow-md" />
        </div>
        <div class="flex-1">
          <p class="text-cyan-500 font-bold uppercase">Lectura actual</p>
          <h3 class="text-4xl font-bold font-display text-slate-800 mt-2">Tras do ceo</h3>
          <a href="/autor" class="text-slate-700 underline underline-offset-4 block mt-2">Manuel Rivas</a>
          <div class="text-slate-600 text-sm mt-8">Periodo de lectura: 25.12.2025 - 20.01.2026</div>
        </div>
      </div>
    </div>
  </div>
  <!-- Votación Libros -->
  <div class="bg-slate-50 py-24">
    <div class="caixa">
      <h2 class="text-3xl lg:text-4xl font-bold font-display">Votación próxima lectura</h2>
      <div class="mt-3 text-lg text-slate-600">Decidamos entre todas cal será a próxima lectura do club.</div>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-3 gap-y-9 sm:gap-x-6 sm:gap-y-16">
        {
          libros.libros.slice(0, 6).map((libro) => (
            <div>
              <div>
                <div class="aspect-[1/1.8] flex items-end">
                  <img src={`/libros/${libro.imaxe}.jpg`} alt={libro.tit} class="shadow-md" />
                </div>
              </div>
              <div class="text-xl font-semibold mt-4">{libro.tit}</div>
              <div class="mt-1 text-slate-600 text-sm">{libro.autor}</div>
              <div class="mt-1 text-slate-400 text-sm">{libro.veces} votos</div>
              <button type="button" class={`boton botoncito mt-4 ${libro.estado === "lido" ? "gris" : "azul !text-white"}`}>
                <svg class="size-4 stroke-current" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5" />
                </svg>
                {libro.estado === "lido" ? "Votada" : "Votar"}
              </button>
            </div>
          ))
        }
      </div>
    </div>
  </div>
  <!-- Valoracións do club -->
  <div class="caixa">
    <h2 class="text-3xl lg:text-5xl font-bold font-display text-cyan-500 mt-24 mb-12">Valoracións do club</h2>
    <Lidos />
    <Paginador />
  </div>
  <!-- Os membros deste club gustoulles... -->
  <div class="bg-slate-50 py-24">
    <div class="caixa">
      <h2 class="text-3xl lg:text-4xl font-bold font-display">Os membros deste club gustoulles...</h2>
      <div class="mt-3 text-lg text-slate-600">Descubre os libros que os membros de este club valoraron con máis de 4 estrelas.</div>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-3 gap-y-9 sm:gap-x-6 sm:gap-y-16">
        {
          libros.libros.slice(0, 6).map((libro) => (
            <div>
              <div>
                <div class="aspect-[1/1.8] flex items-end">
                  <img src={`/libros/${libro.imaxe}.jpg`} alt={libro.tit} class="shadow-md" />
                </div>
              </div>
              <div class="text-xl font-semibold mt-4">{libro.tit}</div>
              <div class="mt-1 text-slate-600 text-sm">{libro.autor}</div>
              <div class="text-sm text-slate-500 flex items-center gap-1 mt-3">
                <div>
                  <svg class="fill-cyan-500 size-4" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z" />
                  </svg>
                </div>
                <div class="font-bold text-cyan-500">{libro.nota}</div>
                <div class="border-l border-slate-300 ml-1 pl-2">{libro.veces} seguidores</div>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</Layout>
