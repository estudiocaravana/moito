---
// filepath: /Users/javi/Documents/Astro/moito/src/pages/cuenta_libros.astro
import Layout from "../layouts/Layout.astro";
import Migas from "../components/libro/Migas.astro";
import BotonListas from "../components/libro/BotonListas.astro";
import data from "../data/libros.json";
import Estrelas from "../components/Estrelas.astro";
import Paginador from "../components/paginador.astro";
---

<Layout>
  <Migas />
  <div class="caixa flex flex-col xl:flex-row gap-3 xl:gap-12 mt-6">
    <!-- COLUMNA IZQ -->
    <div class="xl:mx-auto">
      <img src="/letores/paula.webp" class="shadow-md rounded-4xl size-[110px] z-10 relative" alt="" />
    </div>
    <!-- COLUMNA DRCH -->
    <div class="flex-1">
      <!-- Encabezado -->
      <div class="flex flex-col sm:flex-row gap-6 sm:items-end">
        <div class="flex-1">
          <div class="text-2xl font-bold font-display">Paula Alonso</div>
          <h1 class="text-4xl">Os teus libros</h1>
          <div class="mt-2 text-base">14 títulos</div>
        </div>
        <div>
          <div class="hs-dropdown [--placement:bottom-right] relative inline-flex">
            <button id="hs-dropdown-default" type="button" class="hs-dropdown-toggle boton gris !text-slate-800" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
              <svg class="size-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"></path>
              </svg>
              Ver todos
              <svg class="hs-dropdown-open:rotate-180 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m6 9 6 6 6-6"></path>
              </svg>
            </button>
            <div
              class="hs-dropdown-menu transition-[opacity,margin] duration hs-dropdown-open:opacity-100 opacity-0 hidden min-w-60 bg-slate-100 shadow-md rounded-lg mt-2 after:h-4 after:absolute after:-bottom-4 after:start-0 after:w-full before:h-4 before:absolute before:-top-4 before:start-0 before:w-full z-30"
              role="menu"
              aria-orientation="vertical"
              aria-labelledby="hs-dropdown-default"
            >
              <div class="p-1 space-y-0.5">
                <a class="flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-base text-gray-800 hover:bg-slate-200 focus:outline-hidden focus:bg-slate-200" href="#">Opción 1</a>
                <a class="flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-base text-gray-800 hover:bg-slate-200 focus:outline-hidden focus:bg-slate-200" href="#">Opción 2</a>
                <a class="flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-base text-gray-800 hover:bg-slate-200 focus:outline-hidden focus:bg-slate-200" href="#">Opción 3</a>
                <a class="flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-base text-gray-800 hover:bg-slate-200 focus:outline-hidden focus:bg-slate-200" href="#">Opción 4</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Listado -->
      <div class="relative flex flex-col gap-9 border-t border-slate-300 m8-opinions transition-height duration-300 ease-in-out overflow-hidden mt-12">
        <div></div>
        {
          data.libros.map((libro) => (
            <div class="flex flex-col md:flex-row gap-3 xl:gap-12 pb-9 border-b border-slate-300">
              <div>
                <img class="inline-block w-32 shadow-md" src={`/libros/${libro.imaxe}.jpg`} alt={libro.tit} />
              </div>
              {/* Titulo */}
              <div class="flex-1">
                <div class="flex space-between items-start">
                  <div class="flex-1">
                    <div class="font-bold text-2xl py-1 max-w-[300px]">{libro.tit}</div>
                    <div class="text-slate-500 text-sm pb-2">{libro.autor}</div>
                  </div>
                </div>
                {/* Data */}
                <div class="text-sm text-slate-500 flex items-center gap-1">
                  <div>
                    <svg class="fill-cyan-500 size-4" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z" />
                    </svg>
                  </div>
                  <div class="font-bold text-cyan-500">{libro.nota}</div>
                  <div class="border-l border-slate-300 ml-1 pl-2">{libro.veces} listado</div>
                </div>
                <div class="mb-3 md:mb-0 mt-9">
                  <BotonListas />
                </div>
              </div>
              {/* Versión 'Axuda' */}
              <div class="flex-1 text-sm text-slate-700 bg-slate-100 hidden">
                <div class="pb-6 lg:pb-0 lg:px-6 flex flex-col items-start gap-3 py-6 max-w-[300px]">
                  <div>Axuda a outros lectores deixando a túa valoración sobre este libro</div>
                  <Estrelas />
                </div>
              </div>
              {/* Versión 'Comentario' */}
              <div class="flex-1 text-sm text-slate-700 bg-cyan-50">
                <div class="px-6 flex flex-col items-start gap-3 py-6">
                  <div class="flex justify-between w-full">
                    {/* Nota */}
                    <div class="flex">
                      <div class="text-sm text-slate-500 flex items-center gap-1">
                        <svg class="fill-cyan-500 size-4" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z" />
                        </svg>
                      </div>
                      <div class="font-bold text-cyan-500">{libro.nota}</div>
                    </div>
                    {/* utilidade */}
                    <div class="text-slate-400 flex items-center gap-1">
                      <svg class="size-4 inline-block" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M7 10v12" />
                        <path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z" />
                      </svg>
                      <div>Útil (15)</div>
                    </div>
                  </div>
                  <div>“Non podo evitar recordar cando era unha nena e lía as aventuras dos Cinco. Ou cando desfrutaba das historias de Pippi Långstrump...”</div>
                  {/* Data */}
                  <div class="text-sm text-slate-400">3 de xuño de 2025</div>
                  {/* botóns */}
                  <div class="flex items-center gap-4 mt-5">
                    <button class="botoncito !bg-white !text-xs">Ler completa</button>
                    <button class="botoncito !bg-white !text-xs">
                      <svg class="size-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z" />
                        <path d="m15 5 4 4" />
                      </svg>
                      Editar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          ))
        }
      </div>
      <Paginador />
      <!-- End Pagination -->
    </div>
    <!-- /COLUMNA DRCH -->
  </div>
  <!-- /CAIXA -->
</Layout>
