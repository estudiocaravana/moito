---
import data from "../data/navbar.json";
import Buscar from "./Buscar.astro";
const isIndex = Astro.url.pathname === "/";
---

<div id="navbar" class="fixed top-0 left-0 right-0 z-50">
  <header class="w-[90%] max-w-7xl py-6 mx-auto">
    <nav class="flex items-center justify-between gap-20">
      <!-- logo -->
      <a href="/" aria-label="Inicio">
        <img src="/logo.svg" alt="Moito por Ler" />
      </a>
      <!-- buscar -->
      <div class="hidden lg:flex flex-1">
        <Buscar />
      </div>
      <!-- páginas -->
      <div class="flex gap-4 sm:gap-7 items-center">
        <ul class="hidden xl:flex items-center gap-x-6 uppercase text-sm font-medium">
          {
            data.paginas.map((item) => (
              <li>
                <a class="hover:text-slate-700" href={item.url}>
                  {item.tit}
                </a>
              </li>
            ))
          }
          <!-- usuario -->
        </ul>
        <!-- sólo movil -->
        <button class="inline-flex xl:hidden">
          <svg class="size-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.3-4.3"></path>
          </svg>
        </button>
        <!-- trio de iconos -->
        <a class="hover:text-slate-400 inline-flex relative" href="/usuario">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10.268 21a2 2 0 0 0 3.464 0"></path>
            <path d="M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326"></path>
          </svg>
          <span class="flex absolute top-0 end-0 size-3 -mt-1.5 -me-1.5">
            <span class="animate-ping absolute inline-flex size-full rounded-full bg-cyan-400 opacity-75 border border-white"></span>
            <span class="relative inline-flex rounded-full size-3 bg-cyan-500"></span>
          </span>
        </a>
        <a class="hover:text-slate-400 inline-flex relative" href="/usuario">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
          </svg>
        </a>
        <a class="hover:text-slate-400 inline-flex relative" href="/cuenta">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 0 0-16 0"></path>
          </svg>
          <span class="flex absolute top-0 end-0 size-3 -mt-1.5 -me-1.5">
            <span class="animate-ping absolute inline-flex size-full rounded-full bg-green-400 opacity-75 border border-white"></span>
            <span class="relative inline-flex rounded-full size-3 bg-green-500"></span>
          </span>
        </a>
        <!-- sólo movil -->
        <button class="inline-flex xl:hidden">
          <svg class="size-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 12h16"></path><path d="M4 18h16"></path><path d="M4 6h16"></path>
          </svg>
        </button>
      </div>
    </nav>
  </header>
</div>

<script>
  window.addEventListener("scroll", () => {
    const navbar = document.getElementById("navbar");
    if (!navbar) return;
    if (window.scrollY > 30) {
      navbar.classList.remove("bg-transparent");
      navbar.classList.add("bg-white");
    } else {
      navbar.classList.remove("bg-white");
      navbar.classList.add("bg-transparent");
    }
  });
</script>
